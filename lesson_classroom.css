/* =========================================
   Text Lesson Core (conflict-free, scoped)
   - No button overrides
   - Keep heading colors as-is
   - Code syntax colors (HLJS/Prism tokens)
   - 2025-09 JP-friendly
   ========================================= */

.tutorial-box {
  /* Theme vars */
  --fg: #111827;
  --muted: #6b7280;
  --bg: #ffffff;
  --surface: #f8fafc;
  --border: #e5e7eb;

  /* Code palette (light) */
  --code-bg: #f6f8fa;
  --code-fg: darkred;
  --syn-keyword: #2563eb; /* blue */
  --syn-string: #dc2626;  /* red */
  --syn-number: #0891b2;  /* cyan */
  --syn-func: #7c3aed;    /* purple */
  --syn-const: #ea580c;   /* orange */
  --syn-comment: #6b7280; /* gray */
  --syn-attr: #1d4ed8;    /* deep blue */

  color: var(--fg);
  background: var(--bg);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
               "Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic",
               "YuGothic", "Noto Sans JP", "Meiryo", sans-serif;
  font-size: clamp(16px, 1.05vw + 14px, 18px);
  line-height: 1.85;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  .tutorial-box {
    --fg: #e5e7eb;
    --muted: #9ca3af;
    --bg: #0b0f14;
    --surface: #0f141b;
    --border: #1f2937;

    --code-bg: #0f141b;
    --code-fg: #e5e7eb;
    --syn-keyword: #93c5fd;
    --syn-string: #fca5a5;
    --syn-number: #67e8f9;
    --syn-func: #c4b5fd;
    --syn-const: #fdba74;
    --syn-comment: #9ca3af;
    --syn-attr: #bfdbfe;
  }
}

/* Container stays as-is (no Bootstrap width override).
   Just gentle side padding for narrow viewports. */
.tutorial-box .container {
  padding-left: 1rem;
  padding-right: 1rem;
}

/* Headings: keep color = inherit; only size/spacing/weight */
.tutorial-box h1, .tutorial-box .h1 {
  color: inherit;
  font-weight: 800;
  line-height: 1.2;
  margin: 1.2em 0 .6em;
  font-size: clamp(28px, 2vw + 20px, 40px);
}
.tutorial-box h2, .tutorial-box .h2,
.tutorial-box .h3.fv-blod { /* typoクラス救済 */
  color: inherit;
  font-weight: 700;
  line-height: 1.3;
  margin: 2.0em 0 .8em;
  font-size: clamp(22px, 1.3vw + 16px, 28px);
}
.tutorial-box h3, .tutorial-box .h3 {
  color: inherit;
  font-weight: 700;
  line-height: 1.35;
  margin: 1.6em 0 .6em;
  font-size: clamp(18px, 1vw + 14px, 22px);
}

/* Text spacing & readable line length */
.tutorial-box p,
.tutorial-box ul,
.tutorial-box ol,
.tutorial-box blockquote,
.tutorial-box pre,
.tutorial-box table {
  margin: .9em 0 .9em;
}
.tutorial-box p,
.tutorial-box li {
  max-width: 80ch;
	font-size:1rem;
}

/* Lists */
.tutorial-box ul, .tutorial-box ol { padding-left: 1.25em; }
.tutorial-box li + li { margin-top: .35em; }
.tutorial-box ul > li { list-style: disc; }
.tutorial-box ol > li { list-style: decimal; }

/* Task list (Markdown style) */
.tutorial-box li input[type="checkbox"] {
  margin-right: .55em;
  transform: translateY(1px);
}

/* Blockquote */
.tutorial-box blockquote {
  padding: .8em 1em;
  border-left: 4px solid var(--border);
  background: var(--surface);
  color: inherit;
  border-radius: 6px;
}

/* Divider */
.tutorial-box hr {
  border: 0;
  border-top: 1px solid var(--border);
  margin: 2.2rem 0;
}

/* Links */
.tutorial-box a { text-decoration: underline; }
.tutorial-box a:hover { text-decoration-thickness: 2px; }

/* Inline code */
.tutorial-box code {
  background: var(--code-bg);
  color: var(--code-fg);
  padding: .15em .35em;
  border-radius: 6px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono",
               "Courier New", monospace;
  font-size: .92em;
  border: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
}

/* Code blocks */
.tutorial-box pre {
  background: var(--code-bg);
  color: var(--code-fg);
  padding: 1rem 1.1rem;
  border-radius: 12px;
  overflow: auto;
  border: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.04);
}
.tutorial-box pre code {
  background: transparent;
  color: inherit;
  border: 0; padding: 0; font-size: .95em;
}

/* --- Syntax colors (works if you use highlight.js or Prism) --- */
/* highlight.js */
.tutorial-box .hljs-comment,
.tutorial-box .hljs-quote { color: var(--syn-comment); font-style: italic; }
.tutorial-box .hljs-keyword,
.tutorial-box .hljs-selector-tag { color: var(--syn-keyword); }
.tutorial-box .hljs-string,
.tutorial-box .hljs-attribute { color: var(--syn-string); } /* ← 赤 */
.tutorial-box .hljs-number,
.tutorial-box .hljs-literal { color: var(--syn-number); }
.tutorial-box .hljs-title,
.tutorial-box .hljs-section,
.tutorial-box .hljs-function { color: var(--syn-func); }
.tutorial-box .hljs-attr { color: var(--syn-attr); }
.tutorial-box .hljs-built_in,
.tutorial-box .hljs-class .hljs-title { color: var(--syn-const); }
.tutorial-box .hljs-meta { color: var(--muted); }

/* Prism.js */
.tutorial-box .token.comment,
.tutorial-box .token.prolog,
.tutorial-box .token.doctype,
.tutorial-box .token.cdata { color: var(--syn-comment); font-style: italic; }
.tutorial-box .token.keyword { color: var(--syn-keyword); }
.tutorial-box .token.string { color: var(--syn-string); } /* ← 赤 */
.tutorial-box .token.number,
.tutorial-box .token.boolean { color: var(--syn-number); }
.tutorial-box .token.function { color: var(--syn-func); }
.tutorial-box .token.constant,
.tutorial-box .token.symbol { color: var(--syn-const); }
.tutorial-box .token.attr-name,
.tutorial-box .token.selector { color: var(--syn-attr); }

/* Tables */
.tutorial-box table {
  width: 100%;
  border-collapse: collapse;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}
.tutorial-box th, .tutorial-box td {
  padding: .75rem .9rem;
  border-bottom: 1px solid var(--border);
}
.tutorial-box th {
  text-align: left;
  font-weight: 700;
}

/* Media */
.tutorial-box img, .tutorial-box video {
  max-width: 100%;
  height: auto;
  border-radius: 12px;
}

/* Utility callout (optional) */
.tutorial-box .callout {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 1rem 1.1rem;
  margin: 1.2rem 0;
}
.tutorial-box .callout .title {
  font-weight: 700;
  margin-bottom: .4rem;
}
/* ========== PATCH: Vuetify の code 上書きを無効化（色が消える対策） ========== */
/* ロード順に依存しないよう、セレクタの特異性を上げて再指定 */
.theme--light.v-application .tutorial-box code,
.theme--dark.v-application  .tutorial-box code {
  color: var(--code-fg) !important;   /* 必要最低限だけ !important を付与 */
  background: var(--code-bg) !important;
  border-color: color-mix(in oklab, var(--border) 70%, transparent);
}

/* 文字列を“赤”で見せたい場合（HLJS/Prism を使っている想定） */
.theme--light.v-application .tutorial-box .hljs-string,
.theme--dark.v-application  .tutorial-box .hljs-string,
.theme--light.v-application .tutorial-box .token.string,
.theme--dark.v-application  .tutorial-box .token.string {
  color: var(--syn-string) !important;
}

/* キーワードなども必要なら（任意で有効化）
.theme--light.v-application .tutorial-box .hljs-keyword,
.theme--dark.v-application  .tutorial-box .hljs-keyword,
.theme--light.v-application .tutorial-box .token.keyword,
.theme--dark.v-application  .tutorial-box .token.keyword {
  color: var(--syn-keyword) !important;
}
*/

/* ========== PATCH: 箇条書きの相対サイズ調整（でかすぎ対策） ========== */
.tutorial-box ul,
.tutorial-box ol {
  font-size: 0.96em;         /* ベースより4%だけ縮小 */
  line-height: 1.2;          /* 行間は広めで読みやすく */
}

/* ネストが深くなるほど少しずつ小さく */
.tutorial-box ul ul,
.tutorial-box ol ol { font-size: 0.94em; }
.tutorial-box ul ul ul,
.tutorial-box ol ol ol { font-size: 0.92em; }

/* マーカー（・や数字）も主張し過ぎないように */
.tutorial-box li::marker {
  font-size: 0.85em;
  color: var(--muted);
}

/* リスト内インラインコードの行間崩れ防止（コマンドが多い章向け） */
.tutorial-box li code {
  padding: .12em .32em;
  line-height: 1;
}

